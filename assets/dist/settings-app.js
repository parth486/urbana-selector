import{t as be,b6 as Ne,b7 as ye,b9 as ve,p as we,z as ke,r as t,bc as Ce,Y as Se,$ as _e,v as Pe,A as Oe,c as V,w as J,S as Fe,a$ as De,x as B,f as Re,j as e,I as s,d as N,e as y,b as W,i as U,C as q,s as Te,l as Ae,B as Y,g as Ie,aK as Ee}from"./iconify.js";import{m as ze,a as Le,b as Ve,d as We,c as K,e as $e,u as Me}from"./index.js";import{p as Be,c as Q}from"./chunk-XVMALT6H.js";import{t as re,a as X,c as A}from"./chunk-ML27DD5T.js";var ne=be({slots:{base:"group relative max-w-fit inline-flex items-center justify-start cursor-pointer touch-none tap-highlight-transparent select-none",wrapper:["px-1","relative","inline-flex","items-center","justify-start","shrink-0","overflow-hidden","bg-default-200","rounded-full",...ye],thumb:["z-10","flex","items-center","justify-center","bg-white","shadow-small","rounded-full","origin-right","pointer-events-none"],hiddenInput:Ne,startContent:"z-0 absolute start-1.5 text-current",endContent:"z-0 absolute end-1.5 text-default-600",thumbIcon:"text-black",label:"relative text-foreground select-none ms-2"},variants:{color:{default:{wrapper:["group-data-[selected=true]:bg-default-400","group-data-[selected=true]:text-default-foreground"]},primary:{wrapper:["group-data-[selected=true]:bg-primary","group-data-[selected=true]:text-primary-foreground"]},secondary:{wrapper:["group-data-[selected=true]:bg-secondary","group-data-[selected=true]:text-secondary-foreground"]},success:{wrapper:["group-data-[selected=true]:bg-success","group-data-[selected=true]:text-success-foreground"]},warning:{wrapper:["group-data-[selected=true]:bg-warning","group-data-[selected=true]:text-warning-foreground"]},danger:{wrapper:["group-data-[selected=true]:bg-danger","data-[selected=true]:text-danger-foreground"]}},size:{sm:{wrapper:"w-10 h-6",thumb:["w-4 h-4 text-tiny","group-data-[selected=true]:ms-4"],endContent:"text-tiny",startContent:"text-tiny",label:"text-small"},md:{wrapper:"w-12 h-7",thumb:["w-5 h-5 text-small","group-data-[selected=true]:ms-5"],endContent:"text-small",startContent:"text-small",label:"text-medium"},lg:{wrapper:"w-14 h-8",thumb:["w-6 h-6 text-medium","group-data-[selected=true]:ms-6"],endContent:"text-medium",startContent:"text-medium",label:"text-large"}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{wrapper:"transition-none",thumb:"transition-none"},false:{wrapper:"transition-background",thumb:"transition-all",startContent:["opacity-0","scale-50","transition-transform-opacity","group-data-[selected=true]:scale-100","group-data-[selected=true]:opacity-100"],endContent:["opacity-100","transition-transform-opacity","group-data-[selected=true]:translate-x-3","group-data-[selected=true]:opacity-0"]}}},defaultVariants:{color:"primary",size:"md",isDisabled:!1},compoundVariants:[{disableAnimation:!1,size:"sm",class:{thumb:["group-data-[pressed=true]:w-5","group-data-[selected]:group-data-[pressed]:ml-3"]}},{disableAnimation:!1,size:"md",class:{thumb:["group-data-[pressed=true]:w-6","group-data-[selected]:group-data-[pressed]:ml-4"]}},{disableAnimation:!1,size:"lg",class:{thumb:["group-data-[pressed=true]:w-7","group-data-[selected]:group-data-[pressed]:ml-5"]}}]});function Ge(a,j,n){let{labelProps:v,inputProps:x,isSelected:g,isPressed:r,isDisabled:k,isReadOnly:m}=ve(a,j,n);return{labelProps:v,inputProps:{...x,role:"switch",checked:g},isSelected:g,isPressed:r,isDisabled:k,isReadOnly:m}}function Ue(a={}){var j,n;const v=we(),[x,g]=ke(a,ne.variantKeys),{ref:r,as:k,name:m,value:P="",isReadOnly:F=!1,autoFocus:C=!1,startContent:c,endContent:o,defaultSelected:h,isSelected:S,children:b,thumbIcon:I,className:L,classNames:i,onChange:G,onValueChange:$,...p}=x,u=k||"label",w=t.useRef(null),D=t.useRef(null),E=(n=(j=a.disableAnimation)!=null?j:v==null?void 0:v.disableAnimation)!=null?n:!1,T=t.useId(),_=t.useMemo(()=>{const d=p["aria-label"]||typeof b=="string"?b:void 0;return{name:m,value:P,children:b,autoFocus:C,defaultSelected:h,isSelected:S,isDisabled:!!a.isDisabled,isReadOnly:F,"aria-label":d,"aria-labelledby":p["aria-labelledby"]||T,onChange:$}},[P,m,T,b,C,F,S,h,a.isDisabled,p["aria-label"],p["aria-labelledby"],$]),l=Ce(_);Se(()=>{if(!D.current)return;const d=!!D.current.checked;l.setSelected(d)},[D.current]);const{inputProps:f,isPressed:R,isReadOnly:z}=Ge(_,l,D),{focusProps:ce,isFocused:ee,isFocusVisible:se}=_e({autoFocus:f.autoFocus}),{hoverProps:de,isHovered:ae}=Pe({isDisabled:f.disabled}),te=_.isDisabled||z?!1:R,M=f.checked,H=f.disabled,O=t.useMemo(()=>ne({...g,disableAnimation:E}),[Oe(g),E]),oe=V(i==null?void 0:i.base,L),ue=d=>({...J(de,p,d),ref:w,className:O.base({class:V(oe,d==null?void 0:d.className)}),"data-disabled":B(H),"data-selected":B(M),"data-readonly":B(z),"data-focus":B(ee),"data-focus-visible":B(se),"data-hover":B(ae),"data-pressed":B(te)}),me=t.useCallback((d={})=>({...d,"aria-hidden":!0,className:V(O.wrapper({class:V(i==null?void 0:i.wrapper,d==null?void 0:d.className)}))}),[O,i==null?void 0:i.wrapper]),xe=(d={})=>({...J(f,ce,d),ref:De(D,r),id:f.id,className:O.hiddenInput({class:i==null?void 0:i.hiddenInput}),onChange:Fe(G,f.onChange)}),he=t.useCallback((d={})=>({...d,className:O.thumb({class:V(i==null?void 0:i.thumb,d==null?void 0:d.className)})}),[O,i==null?void 0:i.thumb]),fe=t.useCallback((d={})=>({...d,id:T,className:O.label({class:V(i==null?void 0:i.label,d==null?void 0:d.className)})}),[O,i==null?void 0:i.label,H,M]),ge=t.useCallback((d={includeStateProps:!1})=>J({width:"1em",height:"1em",className:O.thumbIcon({class:V(i==null?void 0:i.thumbIcon)})},d.includeStateProps?{isSelected:M}:{}),[O,i==null?void 0:i.thumbIcon,M]),pe=t.useCallback((d={})=>({width:"1em",height:"1em",...d,className:O.startContent({class:V(i==null?void 0:i.startContent,d==null?void 0:d.className)})}),[O,i==null?void 0:i.startContent,M]),je=t.useCallback((d={})=>({width:"1em",height:"1em",...d,className:O.endContent({class:V(i==null?void 0:i.endContent,d==null?void 0:d.className)})}),[O,i==null?void 0:i.endContent,M]);return{Component:u,slots:O,classNames:i,domRef:w,children:b,thumbIcon:I,startContent:c,endContent:o,isHovered:ae,isSelected:M,isPressed:te,isFocused:ee,isFocusVisible:se,isDisabled:H,getBaseProps:ue,getWrapperProps:me,getInputProps:xe,getLabelProps:fe,getThumbProps:he,getThumbIconProps:ge,getStartContentProps:pe,getEndContentProps:je}}var ie=Re((a,j)=>{const{Component:n,children:v,startContent:x,endContent:g,thumbIcon:r,getBaseProps:k,getInputProps:m,getWrapperProps:P,getThumbProps:F,getThumbIconProps:C,getLabelProps:c,getStartContentProps:o,getEndContentProps:h}=Ue({...a,ref:j}),S=typeof r=="function"?r(C({includeStateProps:!0})):r&&t.cloneElement(r,C()),b=x&&t.cloneElement(x,o()),I=g&&t.cloneElement(g,h());return e.jsxs(n,{...k(),children:[e.jsx("input",{...m()}),e.jsxs("span",{...P(),children:[x&&b,e.jsx("span",{...F(),children:r&&S}),g&&I]}),v&&e.jsx("span",{...c(),children:v})]})});ie.displayName="HeroUI.Switch";var Z=ie;const Ye=({isOpen:a,onOpenChange:j})=>{const[n,v]=t.useState(null),[x,g]=t.useState(!1),[r,k]=t.useState(!1),[m,P]=t.useState(!1),[F,C]=t.useState(null),[c,o]=t.useState(null),[h,S]=t.useState(""),b=t.useMemo(()=>{if(!c)return{categories:0,ranges:0,products:0,totalFiles:0,totalFolders:0};const{structured_data:p,total_folders:u,total_objects:w}=c,D=Object.keys(p).length;let E=0,T=0,_=0;return Object.values(p).forEach(l=>{E+=Object.keys(l).length,Object.values(l).forEach(f=>{T+=Object.keys(f).length,Object.values(f).forEach(R=>{_+=R.images.length+R.downloads.length})})}),{categories:D,ranges:E,products:T,totalFiles:_,totalFolders:u||0}},[c]);t.useEffect(()=>{a&&(I(),o(null),C(null))},[a]);const I=t.useCallback(async()=>{var p;g(!0);try{const u=await fetch("/wp-json/urbana/v1/digital-ocean/config",{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":((p=window.urbanaAdmin)==null?void 0:p.nonce)||""}});if(u.ok){const w=await u.json();v(w)}}catch(u){console.error("Failed to load config:",u)}finally{g(!1)}},[]),L=t.useCallback(async()=>{var p;k(!0),C(null);try{const u=await fetch("/wp-json/urbana/v1/digital-ocean/test-connection",{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":((p=window.urbanaAdmin)==null?void 0:p.nonce)||""}});if(u.ok){const w=await u.json();C(w)}else C({success:!1,message:"Connection test failed"})}catch(u){const w=u instanceof Error?u.message:"Unknown error occurred";C({success:!1,message:w})}finally{k(!1)}},[]),i=t.useCallback(async()=>{var p;P(!0),o(null);try{const u=await fetch("/wp-json/urbana/v1/digital-ocean/fetch-assets",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":((p=window.urbanaAdmin)==null?void 0:p.nonce)||""},body:JSON.stringify({prefix:h})});if(u.ok){const w=await u.json();o(w)}else throw new Error(`Failed to fetch assets: ${u.status} ${u.statusText}`)}catch(u){const w=u instanceof Error?u.message:"Unknown error occurred";o({success:!1,message:w,total_folders:0,total_objects:0,raw_folders:[],raw_objects:[],structured_data:{},debug_info:{prefix:h||"",configuration:n||{bucket_name:"",region:"",endpoint:"",configured:!1},categories:[]}})}finally{P(!1)}},[h,n]),G=t.useCallback(()=>{o(null),C(null),P(!1),k(!1),j(!1)},[j]),$=p=>Object.entries(p).map(([u,w])=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"font-semibold text-lg text-primary mb-2 flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:folder",width:16}),u]}),Object.entries(w).map(([D,E])=>e.jsxs("div",{className:"ml-4 mb-3",children:[e.jsxs("h5",{className:"font-medium text-secondary mb-1 flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:folder-open",width:14}),D]}),Object.entries(E).map(([T,_])=>e.jsxs("div",{className:"ml-4 mb-2",children:[e.jsxs("h6",{className:"font-medium text-success mb-1 flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:package",width:12}),T]}),e.jsxs("div",{className:"ml-4 text-sm space-y-1",children:[_.images.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:image",width:12,className:"text-primary"}),e.jsxs("span",{children:["Images: ",_.images.length]}),e.jsx(K,{size:"sm",variant:"flat",color:"primary",children:_.images.length})]}),_.downloads.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:file",width:12,className:"text-secondary"}),e.jsxs("span",{children:["Downloads: ",_.downloads.length]}),e.jsx(K,{size:"sm",variant:"flat",color:"secondary",children:_.downloads.length})]})]})]},T))]},D))]},u));return e.jsx(ze,{isOpen:a,onOpenChange:j,size:"5xl",scrollBehavior:"inside",className:"urbana-modal",isDismissable:!m&&!r,children:e.jsx(Le,{children:p=>e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:cloud-download",width:20}),"Fetch from Digital Ocean Spaces"]}),e.jsx("p",{className:"text-sm text-foreground-500 font-normal",children:"Browse and analyze assets stored in your Digital Ocean Spaces"})]}),e.jsx(We,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(N,{className:n!=null&&n.configured?"border-success":"border-warning",children:e.jsxs(y,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{icon:n!=null&&n.configured?"lucide:check-circle":"lucide:alert-circle",width:20,className:n!=null&&n.configured?"text-success":"text-warning"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Configuration Status"}),e.jsx("p",{className:"text-sm text-foreground-500",children:n!=null&&n.configured?"Digital Ocean Spaces is configured":"Configuration required"})]})]}),e.jsx(W,{color:"primary",variant:"flat",size:"sm",onPress:L,isLoading:r,isDisabled:!(n!=null&&n.configured)||r||m,startContent:r?void 0:e.jsx(s,{icon:"lucide:wifi",width:16}),children:r?"Testing...":"Test Connection"})]}),n&&e.jsxs("div",{className:"mt-3 text-sm text-foreground-600",children:[e.jsxs("div",{children:["Bucket: ",n.bucket_name||"Not set"]}),e.jsxs("div",{children:["Region: ",n.region||"Not set"]}),e.jsxs("div",{children:["Endpoint: ",n.endpoint||"Not set"]})]}),F&&e.jsx("div",{className:"mt-3",children:e.jsx(K,{size:"sm",variant:"flat",color:F.success?"success":"danger",startContent:e.jsx(s,{icon:F.success?"lucide:check":"lucide:x",width:12}),children:F.message})})]})}),e.jsx(N,{children:e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2 mb-2",children:[e.jsx(s,{icon:"lucide:settings",width:16}),"Fetch Options"]}),e.jsx(U,{label:"Prefix Filter (Optional)",placeholder:"e.g., shelter/ or shelter/peninsula/",value:h,onValueChange:S,description:"Filter objects by prefix to limit the search scope",startContent:e.jsx(s,{icon:"lucide:filter",width:16}),isDisabled:m,classNames:{input:"urbana-input"}})]})})}),m&&e.jsx(N,{className:"border-primary",children:e.jsx(y,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:loader",width:16,className:"animate-spin text-primary"}),e.jsx("span",{className:"font-semibold",children:"Fetching Assets..."})]}),e.jsx(Be,{isIndeterminate:!0,color:"primary",size:"sm",className:"w-full"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Please wait while we fetch assets from Digital Ocean Spaces..."})]})})}),c&&e.jsx(N,{className:c.success?"border-success":"border-danger",children:e.jsx(y,{children:e.jsxs(re,{"aria-label":"Fetch Results",children:[e.jsx(X,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:bar-chart",width:16}),"Summary"]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:c.success?"lucide:check-circle":"lucide:x-circle",width:16,className:c.success?"text-success":"text-danger"}),e.jsx("span",{className:"font-semibold",children:c.success?"Fetch Successful!":"Fetch Failed"})]}),e.jsx("p",{className:"text-sm",children:c.message}),c.success&&e.jsxs("div",{className:"grid grid-cols-5 gap-4 text-center mt-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:b.categories}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Categories"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-secondary",children:b.ranges}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Ranges"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-success",children:b.products}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Products"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-warning",children:b.totalFiles}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Files"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-danger",children:b.totalFolders}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Folders"})]})]})]})},"summary"),e.jsx(X,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:folder-tree",width:16}),"Structure"]}),children:e.jsx(q,{className:"max-h-96",children:e.jsx("div",{className:"text-sm",children:Object.keys(c.structured_data).length>0?$(c.structured_data):e.jsxs("div",{className:"text-center text-foreground-500 py-8",children:[e.jsx(s,{icon:"lucide:folder-x",width:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No structured data found"})]})})})},"structure"),e.jsx(X,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:bug",width:16}),"Debug"]}),children:e.jsx(q,{className:"max-h-96",children:e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"Configuration"}),e.jsx(Q,{className:"text-xs",children:JSON.stringify(c.debug_info.configuration,null,2)})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"Folders Found"}),e.jsx(q,{className:"max-h-32",children:e.jsx(Q,{className:"text-xs",children:c.raw_folders.length>0?c.raw_folders.join(`
`):"No folders found"})})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"Fetch Summary"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:["Prefix: ",c.debug_info.prefix||"(none)"]}),e.jsxs("div",{children:["Total Folders: ",c.total_folders]}),e.jsxs("div",{children:["Total Objects: ",c.total_objects]}),e.jsxs("div",{children:["Categories Found: ",c.debug_info.categories.join(", ")||"(none)"]})]})]}),c.raw_objects.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"Sample Objects"}),e.jsx(q,{className:"max-h-32",children:e.jsx(Q,{className:"text-xs",children:JSON.stringify(c.raw_objects.slice(0,5),null,2)})})]})]})})},"debug")]})})})]})}),e.jsxs($e,{children:[e.jsx(W,{variant:"light",onPress:G,isDisabled:m||r,children:c?"Close":"Cancel"}),!c&&e.jsx(W,{color:"primary",onPress:i,isLoading:m,isDisabled:!(n!=null&&n.configured)||m||r,startContent:m?void 0:e.jsx(s,{icon:"lucide:cloud-download",width:16}),children:m?"Fetching...":"Fetch Assets"})]})]})})})},Ke=[{key:"nyc1",label:"New York 1"},{key:"nyc2",label:"New York 2"},{key:"nyc3",label:"New York 3"},{key:"ams3",label:"Amsterdam 3"},{key:"sfo2",label:"San Francisco 2"},{key:"sfo3",label:"San Francisco 3"},{key:"sgp1",label:"Singapore 1"},{key:"lon1",label:"London 1"},{key:"fra1",label:"Frankfurt 1"},{key:"tor1",label:"Toronto 1"},{key:"blr1",label:"Bangalore 1"},{key:"syd1",label:"Sydney 1"},{key:"atl1",label:"Atlanta 1"}],Xe=({settings:a,onChange:j})=>{var I,L,i,G,$,p,u,w,D,E,T,_;const[n,v]=t.useState(!1),[x,g]=t.useState(null),[r,k]=t.useState(!1),[m,P]=t.useState(null),{isOpen:F,onOpen:C,onOpenChange:c}=Me(),o=t.useCallback((l,f)=>{j({[l]:f})},[j]),h=t.useCallback((l,f)=>{const R=a.reverse_sync||{enabled:!1,auto_create_group_folders:!0,auto_create_range_folders:!0,auto_create_product_folders:!0,base_path:""};j({reverse_sync:{...R,[l]:f}})},[j,a.reverse_sync]),S=t.useCallback(async()=>{var l;v(!0),g(null);try{const f=await fetch("/wp-json/urbana/v1/digital-ocean/test-connection",{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":((l=window.urbanaAdmin)==null?void 0:l.nonce)||""}});if(f.ok){const R=await f.json();g(R)}else g({success:!1,message:"Failed to test connection"})}catch{g({success:!1,message:"Connection test failed"})}finally{v(!1)}},[]),b=t.useCallback(async()=>{var l,f;k(!0),P(null);try{const R=await fetch("/wp-json/urbana/v1/digital-ocean/create-group-folders",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":((l=window.urbanaAdmin)==null?void 0:l.nonce)||""},body:JSON.stringify({group_ids:["test-sync-folder"],base_path:((f=a.reverse_sync)==null?void 0:f.base_path)||""})});if(R.ok){const z=await R.json();P({success:z.success,message:z.success?"Test sync completed successfully!":z.message,details:z})}else{const z=await R.json();P({success:!1,message:z.message||"Test sync failed",details:z})}}catch{P({success:!1,message:"Failed to test sync. Please check your configuration and connection."})}finally{k(!1)}},[(I=a.reverse_sync)==null?void 0:I.base_path]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Digital Ocean Spaces"}),e.jsx("p",{className:"text-foreground-500",children:"Configure your Digital Ocean Spaces for asset storage and management."})]}),x&&e.jsx(N,{className:`border ${x.success?"border-success":"border-danger"}`,children:e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{icon:x.success?"lucide:check-circle":"lucide:x-circle",width:20,className:x.success?"text-success":"text-danger"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.success?"Connection Successful":"Connection Failed"}),e.jsx("p",{className:"text-sm text-foreground-500",children:x.message})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(N,{className:"h-fit",children:[e.jsx(A,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:settings",width:16}),"Configuration"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsx(U,{label:"Bucket Name",placeholder:"your-bucket-name",value:a.bucket_name,onValueChange:l=>o("bucket_name",l),startContent:e.jsx(s,{icon:"lucide:bucket",width:16}),isRequired:!0,classNames:{input:"urbana-input"}}),e.jsx(Te,{label:"Region",placeholder:"Select a region",selectedKeys:a.region?[a.region]:[],onSelectionChange:l=>{const f=Array.from(l)[0];f&&o("region",f)},children:Ke.map(l=>e.jsx(Ae,{children:l.label},l.key))}),e.jsx(U,{label:"Access Key",placeholder:"Your access key",value:a.access_key,onValueChange:l=>o("access_key",l),startContent:e.jsx(s,{icon:"lucide:key",width:16}),isRequired:!0,classNames:{input:"urbana-input"}}),e.jsx(U,{label:"Secret Key",placeholder:"Your secret key",type:"password",value:a.secret_key,onValueChange:l=>o("secret_key",l),startContent:e.jsx(s,{icon:"lucide:eye-off",width:16}),isRequired:!0,classNames:{input:"urbana-input"}}),e.jsx(U,{label:"CDN Endpoint (Optional)",placeholder:"https://your-cdn-endpoint.com",value:a.cdn_endpoint||"",onValueChange:l=>o("cdn_endpoint",l),startContent:e.jsx(s,{icon:"lucide:globe",width:16}),description:"Use your CDN URL if configured, or leave empty to use direct bucket URLs",classNames:{input:"urbana-input"}}),e.jsx(Y,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Configuration Status"}),e.jsx("p",{className:"text-sm text-foreground-500",children:a.configured?"Ready to use":"Configuration incomplete"})]}),e.jsx(K,{size:"sm",variant:"flat",color:a.configured?"success":"warning",startContent:e.jsx(s,{icon:a.configured?"lucide:check":"lucide:alert-circle",width:12}),children:a.configured?"Configured":"Setup Required"})]}),e.jsx(W,{color:"primary",variant:"flat",onPress:S,isLoading:n,isDisabled:!a.bucket_name||!a.access_key||!a.secret_key,startContent:n?void 0:e.jsx(s,{icon:"lucide:wifi",width:16}),className:"w-full",children:n?"Testing...":"Test Connection"}),e.jsx(W,{color:"secondary",variant:"flat",onPress:C,isDisabled:!a.configured,startContent:e.jsx(s,{icon:"lucide:cloud-download",width:16}),className:"w-full",children:"Browse Assets"})]})]}),e.jsxs(N,{className:"h-fit",children:[e.jsx(A,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:info",width:16}),"Setup Instructions"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-white text-xs flex items-center justify-center font-bold mt-0.5",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Create a Space"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Go to your Digital Ocean dashboard and create a new Space"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-white text-xs flex items-center justify-center font-bold mt-0.5",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Generate API Keys"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Create API keys with read/write permissions for Spaces"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-white text-xs flex items-center justify-center font-bold mt-0.5",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Configure Settings"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Enter your bucket name, region, and API credentials above"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-success text-white text-xs flex items-center justify-center font-bold mt-0.5",children:e.jsx(s,{icon:"lucide:check",width:12})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Test Connection"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Use the test button to verify your configuration"})]})]})]}),e.jsx(Y,{}),e.jsx("div",{className:"bg-warning-50 border border-warning-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(s,{icon:"lucide:alert-triangle",width:16,className:"text-warning-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-warning-800",children:"Security Note"}),e.jsx("p",{className:"text-sm text-warning-700",children:"API keys are stored securely in your WordPress database. Never share these credentials."})]})]})})]})]})]}),e.jsx(Ye,{isOpen:F,onOpenChange:c}),m&&e.jsx(N,{className:`border ${m.success?"border-success":"border-danger"}`,children:e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{icon:m.success?"lucide:check-circle":"lucide:x-circle",width:20,className:m.success?"text-success":"text-danger"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:m.success?"Sync Test Successful":"Sync Test Failed"}),e.jsx("p",{className:"text-sm text-foreground-500",children:m.message})]})]})})}),e.jsxs(N,{children:[e.jsx(A,{children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:refresh-cw",width:16}),"Reverse Sync Settings"]}),e.jsx(K,{size:"sm",variant:"flat",color:(L=a.reverse_sync)!=null&&L.enabled?"success":"default",startContent:e.jsx(s,{icon:(i=a.reverse_sync)!=null&&i.enabled?"lucide:check":"lucide:x",width:12}),children:(G=a.reverse_sync)!=null&&G.enabled?"Enabled":"Disabled"})]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-foreground-600 mb-4",children:e.jsx("p",{children:"Automatically create Digital Ocean folder structure when groups, ranges, or products are added via admin."})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-default/20 rounded-medium",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{icon:"lucide:toggle-left",width:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Enable Reverse Sync"}),e.jsx("p",{className:"text-xs text-foreground-500",children:"Master toggle for automatic folder creation"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:(($=a.reverse_sync)==null?void 0:$.enabled)||!1,onChange:l=>h("enabled",l.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),((p=a.reverse_sync)==null?void 0:p.enabled)&&e.jsxs(e.Fragment,{children:[e.jsx(Y,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{label:"Base Path",placeholder:"Leave empty for root level",value:((u=a.reverse_sync)==null?void 0:u.base_path)||"",onValueChange:l=>h("base_path",l),startContent:e.jsx(s,{icon:"lucide:folder",width:16}),description:(w=a.reverse_sync)!=null&&w.base_path?`Folders will be created under: ${a.reverse_sync.base_path}/`:"Folders will be created at root level (recommended)",classNames:{input:"urbana-input"}}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(s,{icon:"lucide:info",width:16,className:"text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"Base Path Configuration:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Empty (recommended):"})," Creates ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"Shelter/Peninsula/"})]}),e.jsxs("li",{children:[e.jsx("strong",{children:'"assets/products":'})," Creates ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"assets/products/Shelter/Peninsula/"})]})]}),e.jsx("p",{className:"mt-2",children:'If your Digital Ocean already has folders at root level (like "Shelter", "toilet"), leave this empty.'})]})]})})]}),e.jsx(Y,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Auto-Create Folders For:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-small hover:bg-default/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:layers",width:16}),e.jsx("span",{className:"text-sm",children:"Product Groups"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:((D=a.reverse_sync)==null?void 0:D.auto_create_group_folders)!==!1,onChange:l=>h("auto_create_group_folders",l.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-small hover:bg-default/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:grid-3x3",width:16}),e.jsx("span",{className:"text-sm",children:"Product Ranges"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:((E=a.reverse_sync)==null?void 0:E.auto_create_range_folders)!==!1,onChange:l=>h("auto_create_range_folders",l.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-small hover:bg-default/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:package",width:16}),e.jsx("span",{className:"text-sm",children:"Individual Products"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:((T=a.reverse_sync)==null?void 0:T.auto_create_product_folders)!==!1,onChange:l=>h("auto_create_product_folders",l.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]})]}),e.jsx(Y,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(W,{size:"sm",variant:"flat",color:"secondary",startContent:e.jsx(s,{icon:"lucide:eye",width:14}),onPress:()=>{},children:"View Sync Logs"}),e.jsx(W,{size:"sm",variant:"flat",color:"primary",startContent:r?void 0:e.jsx(s,{icon:"lucide:play",width:14}),onPress:b,isLoading:r,isDisabled:!a.configured||!((_=a.reverse_sync)!=null&&_.enabled),children:r?"Testing...":"Test Sync"})]})]})]})]})]}),e.jsxs(N,{children:[e.jsx(A,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:folder-tree",width:16}),"Expected Folder Structure"]})}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm text-foreground-600 mb-4",children:"Your Digital Ocean Space should follow this folder structure for optimal integration:"}),e.jsx("pre",{className:"px-2 py-1 h-fit font-mono font-normal bg-default/40 text-default-700 rounded-small text-xs overflow-x-auto",children:e.jsx("code",{children:`your-bucket-name/
â”œâ”€â”€ shelter/
â”‚   â””â”€â”€ peninsula/
â”‚       â””â”€â”€ k302/
â”‚           â”œâ”€â”€ images/
â”‚           â”‚   â”œâ”€â”€ hero.jpg
â”‚           â”‚   â””â”€â”€ gallery-1.jpg
â”‚           â”œâ”€â”€ downloads/
â”‚           â”‚   â”œâ”€â”€ spec.pdf
â”‚           â”‚   â””â”€â”€ install.pdf
â”‚           â””â”€â”€ img_conf/
â”‚               â”œâ”€â”€ Post Material/
â”‚               â”‚   â”œâ”€â”€ Pine.jpg
â”‚               â”‚   â””â”€â”€ Concrete.jpg
â”‚               â”œâ”€â”€ Seat Material/
â”‚               â”‚   â”œâ”€â”€ Recycled Plastic.jpg
â”‚               â”‚   â””â”€â”€ Thermoplastic.jpg
â”‚               â””â”€â”€ Finish/
â”‚                   â”œâ”€â”€ Galvanized.jpg
â”‚                   â””â”€â”€ Powder Coated.jpg
â”‚               
â”œâ”€â”€ seating/
â”‚   â””â”€â”€ bench/
â”‚       â””â”€â”€ b100/
â”‚           â”œâ”€â”€ images/
â”‚           â””â”€â”€ downloads/
â””â”€â”€ ...`})}),e.jsxs("div",{className:"mt-4 text-sm text-foreground-500 space-y-2",children:[e.jsx("p",{children:"â€¢ Category folders (e.g., shelter, seating, bridge)"}),e.jsx("p",{children:"â€¢ Range folders (e.g., peninsula, bench, decorative)"}),e.jsx("p",{children:"â€¢ Product code folders (e.g., k302, b100)"}),e.jsx("p",{children:"â€¢ Asset type folders: images/ and downloads/"})]})]})]}),e.jsxs(N,{className:"border-2 border-warning-200 dark:border-warning-800",children:[e.jsx(A,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:alert-circle",width:20,className:"text-warning-600"}),e.jsx("h3",{className:"font-semibold text-warning-800 dark:text-warning-400",children:"Important: Renaming Groups, Ranges, or Products"})]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(s,{icon:"lucide:edit",width:20,className:"text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Renaming in WordPress Admin (Recommended)"}),e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-2",children:[e.jsx("p",{children:"When you rename a Product Group, Range, or Product in the admin:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Edit the item and change the name"}),e.jsx("li",{children:"Click Save"}),e.jsxs("li",{children:[e.jsx("strong",{children:"Popup will ask:"}),' "Do you want to rename the Digital Ocean folder?"']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Click OK:"})," Folder and all files are automatically renamed in Digital Ocean âœ“"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Click Cancel:"})," Only WordPress is updated, folder keeps old name"]})]}),e.jsxs("div",{className:"bg-blue-100 dark:bg-blue-900 rounded p-2 mt-2",children:[e.jsx("p",{className:"font-medium",children:"ðŸ’¡ Best Practice:"}),e.jsx("p",{children:"Always rename in WordPress first and let the plugin handle Digital Ocean automatically!"})]})]})]})]})}),e.jsx("div",{className:"bg-orange-50 dark:bg-orange-950 border border-orange-200 dark:border-orange-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(s,{icon:"lucide:cloud",width:20,className:"text-orange-600 dark:text-orange-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-2",children:"If Folder Name is Changed in Digital Ocean"}),e.jsxs("div",{className:"text-sm text-orange-700 dark:text-orange-300 space-y-2",children:[e.jsx("p",{className:"font-medium",children:"âš ï¸ Short answer: Nothing happens automatically - WordPress won't know about it."}),e.jsxs("div",{className:"bg-orange-100 dark:bg-orange-900 rounded p-3 mt-2",children:[e.jsx("p",{className:"font-medium mb-1",children:"Example Scenario:"}),e.jsxs("p",{children:["You rename ",e.jsx("code",{className:"bg-orange-200 dark:bg-orange-800 px-1 rounded",children:"Shelter/Peninsula/"})," â†’ ",e.jsx("code",{className:"bg-orange-200 dark:bg-orange-800 px-1 rounded",children:"Shelter/Peninsula-V2/"})," in Digital Ocean"]})]}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsx("p",{className:"font-medium",children:"What happens:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:'WordPress database still has: Product Range name = "Peninsula"'}),e.jsx("li",{children:'Digital Ocean now has: Folder = "Shelter/Peninsula-V2/"'})]})]}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsx("p",{className:"font-medium",children:"Plugin behavior:"}),e.jsxs("ul",{className:"space-y-1 ml-2",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(s,{icon:"lucide:x",width:14,className:"text-danger mt-0.5"}),e.jsxs("span",{children:['"Check Folders" will show "Peninsula" as ',e.jsx("strong",{children:'"Missing"'})]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(s,{icon:"lucide:x",width:14,className:"text-danger mt-0.5"}),e.jsx("span",{children:"Frontend image URLs will break (looking for old path)"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(s,{icon:"lucide:alert-triangle",width:14,className:"text-warning-600 mt-0.5"}),e.jsx("span",{children:'If you click "Sync" â†’ Creates a NEW folder "Shelter/Peninsula/"'})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(s,{icon:"lucide:alert-triangle",width:14,className:"text-warning-600 mt-0.5"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Result:"})," Two folders (Peninsula and Peninsula-V2)"]})]})]})]}),e.jsxs("div",{className:"bg-orange-100 dark:bg-orange-900 rounded p-3 mt-3",children:[e.jsx("p",{className:"font-medium mb-2",children:"âœ“ What You Need to Do:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Rename folder in Digital Ocean"}),e.jsxs("li",{children:[e.jsx("strong",{children:"Also"})," rename the Product Range in WordPress admin to match"]}),e.jsx("li",{children:"Or manually update image URLs"})]})]})]})]})]})}),e.jsxs("div",{className:"bg-default/40 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-foreground-700 mb-2 flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:lightbulb",width:16}),"General Tips"]}),e.jsxs("ul",{className:"text-sm text-foreground-600 space-y-2 ml-6",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary font-bold",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Case Sensitivity:"}),' Digital Ocean is case-sensitive. "Shelter" and "shelter" are different folders!']})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary font-bold",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Always Check:"}),' After renaming, use "Check Folders" to verify everything is in sync']})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary font-bold",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Backup First:"})," Before bulk renaming, download important files as backup"]})]})]})]})]})]})]})},qe=({settings:a,onChange:j})=>{var v,x,g;const n=t.useCallback((r,k)=>{j({[r]:k})},[j]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"General Settings"}),e.jsx("p",{className:"text-foreground-500",children:"Configure general plugin behavior and preferences."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(N,{children:[e.jsx(A,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:bell",width:16}),"Notifications"]})}),e.jsx(y,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Receive email notifications for new form submissions"})]}),e.jsx(Z,{isSelected:a.email_notifications,onValueChange:r=>n("email_notifications",r),color:"primary"})]})})]}),e.jsxs(N,{children:[e.jsx(A,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:save",width:16}),"Data Management"]})}),e.jsx(y,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Auto Save"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Automatically save changes as you work"})]}),e.jsx(Z,{isSelected:a.auto_save,onValueChange:r=>n("auto_save",r),color:"primary"})]})})]}),e.jsxs(N,{children:[e.jsx(A,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:bug",width:16}),"Development"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Debug Mode"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Enable debug logging and additional developer information"})]}),e.jsx(Z,{isSelected:a.debug_mode,onValueChange:r=>n("debug_mode",r),color:"warning"})]}),a.debug_mode&&e.jsx("div",{className:"bg-warning-50 border border-warning-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(s,{icon:"lucide:alert-triangle",width:16,className:"text-warning-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-warning-800",children:"Debug Mode Active"}),e.jsx("p",{className:"text-sm text-warning-700",children:"Additional logging is enabled. Disable in production for better performance."})]})]})})]})]}),e.jsxs(N,{children:[e.jsx(A,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:info",width:16}),"Additional Options"]})}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm text-foreground-500 mb-4",children:"More configuration options will be available in future updates."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),e.jsx("span",{className:"text-sm",children:"Database optimization"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),e.jsx("span",{className:"text-sm",children:"Performance monitoring"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),e.jsx("span",{className:"text-sm",children:"Advanced caching options"})]})]})]})]})]}),e.jsxs(N,{children:[e.jsx(A,{children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:server",width:16}),"System Information"]})}),e.jsx(y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground-700",children:"WordPress Version"}),e.jsx("p",{className:"text-foreground-500",children:((v=window.urbanaAdmin)==null?void 0:v.wpVersion)||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground-700",children:"PHP Version"}),e.jsx("p",{className:"text-foreground-500",children:((x=window.urbanaAdmin)==null?void 0:x.phpVersion)||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground-700",children:"Plugin Version"}),e.jsx("p",{className:"text-foreground-500",children:((g=window.urbanaAdmin)==null?void 0:g.pluginVersion)||"1.0.0"})]})]})})]})]})},He=()=>{const[a,j]=t.useState(!0),[n,v]=t.useState(!1),[x,g]=t.useState({digitalOcean:{bucket_name:"",region:"nyc3",access_key:"",secret_key:"",cdn_endpoint:"",configured:!1},general:{email_notifications:!0,auto_save:!0,debug_mode:!1}}),[r,k]=t.useState(!1),[m,P]=t.useState(null);t.useEffect(()=>{F()},[]);const F=t.useCallback(async()=>{var o;j(!0);try{const h=await fetch("/wp-json/urbana/v1/digital-ocean/config",{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":((o=window.urbanaAdmin)==null?void 0:o.nonce)||""}});if(h.ok){const S=await h.json();g(b=>({...b,digitalOcean:{...b.digitalOcean,...S}}))}}catch(h){console.error("Failed to load settings:",h)}finally{j(!1)}},[]),C=t.useCallback((o,h)=>{g(S=>({...S,[o]:{...S[o],...h}})),k(!0)},[]),c=t.useCallback(async()=>{var o,h,S,b,I;v(!0);try{if(!(await fetch("/wp-json/urbana/v1/digital-ocean/config",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":((o=window.urbanaAdmin)==null?void 0:o.nonce)||""},body:JSON.stringify(x.digitalOcean)})).ok)throw new Error("Failed to save Digital Ocean settings");k(!1),P(new Date),(S=(h=window.wp)==null?void 0:h.data)!=null&&S.dispatch("core/notices")&&window.wp.data.dispatch("core/notices").createSuccessNotice("Settings saved successfully!")}catch(L){console.error("Failed to save settings:",L),(I=(b=window.wp)==null?void 0:b.data)!=null&&I.dispatch("core/notices")&&window.wp.data.dispatch("core/notices").createErrorNotice("Failed to save settings. Please try again.")}finally{v(!1)}},[x]);return a?e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Ie,{size:"lg",color:"primary"}),e.jsx("p",{className:"text-foreground-500",children:"Loading settings..."})]})}):e.jsxs("div",{className:"urbana-settings-page max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Settings"}),e.jsx("p",{className:"text-foreground-500",children:"Configure your Urbana Selector plugin settings"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[m&&e.jsxs("div",{className:"text-sm text-foreground-500 text-right",children:[e.jsx("div",{className:"text-xs",children:"Last saved:"}),e.jsx("div",{className:"font-medium",children:m.toLocaleString()})]}),e.jsx(W,{color:r?"primary":"success",variant:r?"solid":"flat",onPress:c,isLoading:n,isDisabled:n||!r,startContent:n?void 0:e.jsx(s,{icon:"lucide:save",width:18}),size:"lg",children:n?"Saving...":r?"Save Changes":"Saved"})]})]}),e.jsx(N,{className:"overflow-visible",children:e.jsx(y,{className:"p-0",children:e.jsxs(re,{"aria-label":"Settings",variant:"underlined",classNames:{tabList:"gap-6 w-full relative rounded-none p-0 border-b border-divider",cursor:"w-full bg-primary",tab:"max-w-fit px-6 h-12",tabContent:"group-data-[selected=true]:text-primary"},children:[e.jsx(X,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:cloud",width:18}),e.jsx("span",{children:"Digital Ocean"}),e.jsx(K,{size:"sm",variant:"flat",color:x.digitalOcean.configured?"success":"warning",children:x.digitalOcean.configured?"Configured":"Setup Required"})]}),children:e.jsx("div",{className:"p-6",children:e.jsx(Xe,{settings:x.digitalOcean,onChange:o=>C("digitalOcean",o)})})},"digital-ocean"),e.jsx(X,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:settings",width:18}),e.jsx("span",{children:"General"})]}),children:e.jsx("div",{className:"p-6",children:e.jsx(qe,{settings:x.general,onChange:o=>C("general",o)})})},"general"),e.jsx(X,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:info",width:18}),e.jsx("span",{children:"About"})]}),children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Urbana Selector Plugin"}),e.jsx("p",{className:"text-foreground-600 mb-4",children:"A comprehensive product configuration system for Urbana products with advanced data management capabilities."})]}),e.jsx(Y,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(N,{className:"border",children:[e.jsx(A,{children:e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:package",width:16}),"Features"]})}),e.jsx(y,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"Product data management"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"Digital Ocean Spaces integration"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"Asset folder generation"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"Customer order management"]})]})})]}),e.jsxs(N,{className:"border",children:[e.jsx(A,{children:e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:code",width:16}),"Tech Stack"]})}),e.jsx(y,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"React 18+ with TypeScript"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"HeroUI component library"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"PHP 8.1+ backend"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(s,{icon:"lucide:check",width:12,className:"text-success"}),"WordPress REST API"]})]})})]})]})]})})},"about")]})})})]})},Je=()=>e.jsx("div",{className:"min-h-screen bg-background text-foreground",children:e.jsx(He,{})}),le=document.getElementById("urbana-settings-root");le&&Ee.createRoot(le).render(e.jsx(Je,{}));
